#!/bin/bash
# usage: print-test-page <PRINTER_NAME> <PDF_FILE>
#
# By default PRINTER_NAME is assume the first enabled printer in the system
# PDF_FILE is assumed to be the default testpage on the system
#

get-default-enabled-printer () {
    lpstat -p | grep enabled | cut -d ' ' -f 2
}


DEFAULT_PRINTER=$(get-default-enabled-printer)
PRINTER_NAME="${2:-${DEFAULT_PRINTER}}"
DOCUMENT="$1"

lp -d "${PRINTER_NAME}" -o prettyprint=true,sides=two-sided-long-edge "${DOCUMENT}"

echo "Document ${DOCUMENT} requested to print in the printer $PRINTER_NAME."
